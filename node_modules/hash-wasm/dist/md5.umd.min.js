/*!
 * hash-wasm (https://www.npmjs.com/package/hash-wasm)
 * (c) Dani Biro
 * @license MIT
 */

!function(A,B){"object"==typeof exports&&"undefined"!=typeof module?B(exports):"function"==typeof define&&define.amd?define(["exports"],B):B((A="undefined"!=typeof globalThis?globalThis:A||self).hashwasm=A.hashwasm||{})}(this,(function(A){"use strict";function B(A,B,e,t){return new(e||(e=Promise))((function(i,I){function o(A){try{n(t.next(A))}catch(A){I(A)}}function a(A){try{n(t.throw(A))}catch(A){I(A)}}function n(A){var B;A.done?i(A.value):(B=A.value,B instanceof e?B:new e((function(A){A(B)}))).then(o,a)}n((t=t.apply(A,B||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;class e{constructor(){this.mutex=Promise.resolve()}lock(){let A=()=>{};return this.mutex=this.mutex.then((()=>new Promise(A))),new Promise((B=>{A=B}))}dispatch(A){return B(this,void 0,void 0,(function*(){const B=yield this.lock();try{return yield Promise.resolve(A())}finally{B()}}))}}var t;const i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,I=null!==(t=i.Buffer)&&void 0!==t?t:null,o=i.TextEncoder?new i.TextEncoder:null;function a(A,B){return(15&A)+(A>>6|A>>3&8)<<4|(15&B)+(B>>6|B>>3&8)}const n="a".charCodeAt(0)-10,g="0".charCodeAt(0);function Q(A,B,e){let t=0;for(let i=0;i<e;i++){let e=B[i]>>>4;A[t++]=e>9?e+n:e+g,e=15&B[i],A[t++]=e>9?e+n:e+g}return String.fromCharCode.apply(null,A)}const r=null!==I?A=>{if("string"==typeof A){const B=I.from(A,"utf8");return new Uint8Array(B.buffer,B.byteOffset,B.length)}if(I.isBuffer(A))return new Uint8Array(A.buffer,A.byteOffset,A.length);if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer,A.byteOffset,A.byteLength);throw new Error("Invalid data type!")}:A=>{if("string"==typeof A)return o.encode(A);if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer,A.byteOffset,A.byteLength);throw new Error("Invalid data type!")},E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=new Uint8Array(256);for(let A=0;A<E.length;A++)c[E.charCodeAt(A)]=A;function s(A){const B=function(A){let B=Math.floor(.75*A.length);const e=A.length;return"="===A[e-1]&&(B-=1,"="===A[e-2]&&(B-=1)),B}(A),e=A.length,t=new Uint8Array(B);let i=0;for(let B=0;B<e;B+=4){const e=c[A.charCodeAt(B)],I=c[A.charCodeAt(B+1)],o=c[A.charCodeAt(B+2)],a=c[A.charCodeAt(B+3)];t[i]=e<<2|I>>4,i+=1,t[i]=(15&I)<<4|o>>2,i+=1,t[i]=(3&o)<<6|63&a,i+=1}return t}const C=16384,h=new e,f=new Map;function l(A,e){return B(this,void 0,void 0,(function*(){let t=null,i=null,I=!1;if("undefined"==typeof WebAssembly)throw new Error("WebAssembly is not supported in this environment!");const o=()=>new DataView(t.exports.memory.buffer).getUint32(t.exports.STATE_SIZE,!0),n=h.dispatch((()=>B(this,void 0,void 0,(function*(){if(!f.has(A.name)){const B=s(A.data),e=WebAssembly.compile(B);f.set(A.name,e)}const B=yield f.get(A.name);t=yield WebAssembly.instantiate(B,{})})))),g=(A=null)=>{I=!0,t.exports.Hash_Init(A)},E=A=>{if(!I)throw new Error("update() called before init()");(A=>{let B=0;for(;B<A.length;){const e=A.subarray(B,B+C);B+=e.length,i.set(e),t.exports.Hash_Update(e.length)}})(r(A))},c=new Uint8Array(2*e),l=(A,B=null)=>{if(!I)throw new Error("digest() called before init()");return I=!1,t.exports.Hash_Final(B),"binary"===A?i.slice(0,e):Q(c,i,e)},p=A=>"string"==typeof A?A.length<4096:A.byteLength<C;let y=p;switch(A.name){case"argon2":case"scrypt":y=()=>!0;break;case"blake2b":case"blake2s":y=(A,B)=>B<=512&&p(A);break;case"blake3":y=(A,B)=>0===B&&p(A);break;case"xxhash64":case"xxhash3":case"xxhash128":y=()=>!1}return yield(()=>B(this,void 0,void 0,(function*(){t||(yield n);const A=t.exports.Hash_GetBuffer(),B=t.exports.memory.buffer;i=new Uint8Array(B,A,C)})))(),{getMemory:()=>i,writeMemory:(A,B=0)=>{i.set(A,B)},getExports:()=>t.exports,setMemorySize:A=>{t.exports.Hash_SetMemorySize(A);const B=t.exports.Hash_GetBuffer(),e=t.exports.memory.buffer;i=new Uint8Array(e,B,A)},init:g,update:E,digest:l,save:()=>{if(!I)throw new Error("save() can only be called after init() and before digest()");const B=t.exports.Hash_GetState(),e=o(),i=t.exports.memory.buffer,n=new Uint8Array(i,B,e),g=new Uint8Array(4+e);return function(A,B){const e=B.length>>1;for(let t=0;t<e;t++){const e=t<<1;A[t]=a(B.charCodeAt(e),B.charCodeAt(e+1))}}(g,A.hash),g.set(n,4),g},load:B=>{if(!(B instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");const e=t.exports.Hash_GetState(),i=o(),n=4+i,g=t.exports.memory.buffer;if(B.length!==n)throw new Error(`Bad state length (expected ${n} bytes, got ${B.length})`);if(!function(A,B){if(A.length!==2*B.length)return!1;for(let e=0;e<B.length;e++){const t=e<<1;if(B[e]!==a(A.charCodeAt(t),A.charCodeAt(t+1)))return!1}return!0}(A.hash,B.subarray(0,4)))throw new Error("This state was written by an incompatible hash implementation");const Q=B.subarray(4);new Uint8Array(g,e,i).set(Q),I=!0},calculate:(A,B=null,I=null)=>{if(!y(A,B))return g(B),E(A),l("hex",I);const o=r(A);return i.set(o),t.exports.Hash_Calculate(o.length,B,I),Q(c,i,e)},hashLength:e}}))}var p={name:"md5",data:"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",hash:"42fa4d29"};const y=new e;let d=null;A.createMD5=function(){return l(p,16).then((A=>{A.init();const B={init:()=>(A.init(),B),update:e=>(A.update(e),B),digest:B=>A.digest(B),save:()=>A.save(),load:e=>(A.load(e),B),blockSize:64,digestSize:16};return B}))},A.md5=function(A){if(null===d)return function(A,e,t){return B(this,void 0,void 0,(function*(){const B=yield A.lock(),i=yield l(e,t);return B(),i}))}(y,p,16).then((B=>(d=B,d.calculate(A))));try{const B=d.calculate(A);return Promise.resolve(B)}catch(A){return Promise.reject(A)}}}));
