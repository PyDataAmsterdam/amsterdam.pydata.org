{"version":3,"file":"status.js","names":["defaultState","PLUGINS_HASH","LAST_NODE_COUNTER","plugins","cdnObfuscatedPrefix","statusReducer","state","action","type","uuid","v4","payload","plugin","name","Error","JSON","stringify","internal","counter"],"sources":["../../../src/redux/reducers/status.ts"],"sourcesContent":["import _ from \"lodash\"\nimport { uuid } from \"gatsby-core-utils\"\nimport { ActionsUnion, IGatsbyState } from \"../types\"\n\nconst defaultState: IGatsbyState[\"status\"] = {\n  PLUGINS_HASH: ``,\n  LAST_NODE_COUNTER: 0,\n  plugins: {},\n  cdnObfuscatedPrefix: ``,\n}\n\nexport const statusReducer = (\n  state: IGatsbyState[\"status\"] = defaultState,\n  action: ActionsUnion\n): IGatsbyState[\"status\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return {\n        ...defaultState,\n        cdnObfuscatedPrefix: state.cdnObfuscatedPrefix ?? ``,\n      }\n    case `INIT`: {\n      if (!state.cdnObfuscatedPrefix) {\n        state.cdnObfuscatedPrefix = uuid.v4()\n      }\n      return state\n    }\n    case `UPDATE_PLUGINS_HASH`:\n      return {\n        ...state,\n        PLUGINS_HASH: action.payload,\n      }\n    case `SET_PLUGIN_STATUS`:\n      if (!action.plugin || !action.plugin?.name) {\n        throw new Error(`You can't set plugin status without a plugin`)\n      }\n      if (!_.isObject(action.payload)) {\n        throw new Error(\n          `You must pass an object into setPluginStatus. What was passed in was ${JSON.stringify(\n            action.payload,\n            null,\n            4\n          )}`\n        )\n      }\n      return {\n        ...state,\n        plugins: {\n          ...state.plugins,\n          [action.plugin.name]: _.merge(\n            {},\n            state.plugins[action.plugin.name],\n            action.payload\n          ),\n        },\n      }\n    case `CREATE_NODE`:\n      state.LAST_NODE_COUNTER = action.payload.internal.counter\n      return state\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;;;;AACA;AAGA,MAAMA,YAAoC,GAAG;EAC3CC,YAAY,EAAG,EAAC;EAChBC,iBAAiB,EAAE,CAAC;EACpBC,OAAO,EAAE,CAAC,CAAC;EACXC,mBAAmB,EAAG;AACxB,CAAC;AAEM,MAAMC,aAAa,GAAG,CAC3BC,KAA6B,GAAGN,YAAY,EAC5CO,MAAoB,KACO;EAAA;EAC3B,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAM,cAAa;MACjB,OAAO;QACL,GAAGR,YAAY;QACfI,mBAAmB,2BAAEE,KAAK,CAACF,mBAAmB,yEAAK;MACrD,CAAC;IACH,KAAM,MAAK;MAAE;QACX,IAAI,CAACE,KAAK,CAACF,mBAAmB,EAAE;UAC9BE,KAAK,CAACF,mBAAmB,GAAGK,qBAAI,CAACC,EAAE,EAAE;QACvC;QACA,OAAOJ,KAAK;MACd;IACA,KAAM,qBAAoB;MACxB,OAAO;QACL,GAAGA,KAAK;QACRL,YAAY,EAAEM,MAAM,CAACI;MACvB,CAAC;IACH,KAAM,mBAAkB;MACtB,IAAI,CAACJ,MAAM,CAACK,MAAM,IAAI,oBAACL,MAAM,CAACK,MAAM,2CAAb,eAAeC,IAAI,GAAE;QAC1C,MAAM,IAAIC,KAAK,CAAE,8CAA6C,CAAC;MACjE;MACA,IAAI,CAAC,wBAAWP,MAAM,CAACI,OAAO,CAAC,EAAE;QAC/B,MAAM,IAAIG,KAAK,CACZ,wEAAuEC,IAAI,CAACC,SAAS,CACpFT,MAAM,CAACI,OAAO,EACd,IAAI,EACJ,CAAC,CACD,EAAC,CACJ;MACH;MACA,OAAO;QACL,GAAGL,KAAK;QACRH,OAAO,EAAE;UACP,GAAGG,KAAK,CAACH,OAAO;UAChB,CAACI,MAAM,CAACK,MAAM,CAACC,IAAI,GAAG,qBACpB,CAAC,CAAC,EACFP,KAAK,CAACH,OAAO,CAACI,MAAM,CAACK,MAAM,CAACC,IAAI,CAAC,EACjCN,MAAM,CAACI,OAAO;QAElB;MACF,CAAC;IACH,KAAM,aAAY;MAChBL,KAAK,CAACJ,iBAAiB,GAAGK,MAAM,CAACI,OAAO,CAACM,QAAQ,CAACC,OAAO;MACzD,OAAOZ,KAAK;IACd;MACE,OAAOA,KAAK;EAAA;AAElB,CAAC;AAAA"}