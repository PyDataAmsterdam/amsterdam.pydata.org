{"version":3,"file":"is-file-inside-compilations.js","names":["filesInsideDevelopHtmlCompilation","Set","removeQueryParams","path","split","setFilesFromDevelopHtmlCompilation","developHtmlCompilation","clear","module","modules","NormalModule","resource","add","isFileInsideCompilations","absolutePath","developBrowserCompilation","has"],"sources":["../../../../src/utils/webpack/utils/is-file-inside-compilations.ts"],"sourcesContent":["import { Compilation, NormalModule } from \"webpack\"\n\nconst filesInsideDevelopHtmlCompilation = new Set<string>()\n\nfunction removeQueryParams(path: string): string {\n  return path.split(`?`)[0]\n}\n\nexport function setFilesFromDevelopHtmlCompilation(\n  developHtmlCompilation: Compilation\n): void {\n  filesInsideDevelopHtmlCompilation.clear()\n\n  for (const module of developHtmlCompilation.modules) {\n    if (module instanceof NormalModule && module.resource) {\n      filesInsideDevelopHtmlCompilation.add(removeQueryParams(module.resource))\n    }\n  }\n}\n\n/**\n * Checks if a file is inside either `develop` or `develop-html` compilation. Used to determine if\n * we should generate codeframe for this file for error overlay.\n */\nexport function isFileInsideCompilations(\n  absolutePath: string,\n  developBrowserCompilation: Compilation\n): boolean {\n  if (filesInsideDevelopHtmlCompilation.has(absolutePath)) {\n    return true\n  }\n\n  for (const module of developBrowserCompilation.modules) {\n    if (module instanceof NormalModule && module.resource) {\n      if (absolutePath === removeQueryParams(module.resource)) {\n        return true\n      }\n    }\n  }\n\n  return false\n}\n"],"mappings":";;;;;AAAA;AAEA,MAAMA,iCAAiC,GAAG,IAAIC,GAAG,EAAU;AAE3D,SAASC,iBAAiB,CAACC,IAAY,EAAU;EAC/C,OAAOA,IAAI,CAACC,KAAK,CAAE,GAAE,CAAC,CAAC,CAAC,CAAC;AAC3B;AAEO,SAASC,kCAAkC,CAChDC,sBAAmC,EAC7B;EACNN,iCAAiC,CAACO,KAAK,EAAE;EAEzC,KAAK,MAAMC,MAAM,IAAIF,sBAAsB,CAACG,OAAO,EAAE;IACnD,IAAID,MAAM,YAAYE,qBAAY,IAAIF,MAAM,CAACG,QAAQ,EAAE;MACrDX,iCAAiC,CAACY,GAAG,CAACV,iBAAiB,CAACM,MAAM,CAACG,QAAQ,CAAC,CAAC;IAC3E;EACF;AACF;;AAEA;AACA;AACA;AACA;AACO,SAASE,wBAAwB,CACtCC,YAAoB,EACpBC,yBAAsC,EAC7B;EACT,IAAIf,iCAAiC,CAACgB,GAAG,CAACF,YAAY,CAAC,EAAE;IACvD,OAAO,IAAI;EACb;EAEA,KAAK,MAAMN,MAAM,IAAIO,yBAAyB,CAACN,OAAO,EAAE;IACtD,IAAID,MAAM,YAAYE,qBAAY,IAAIF,MAAM,CAACG,QAAQ,EAAE;MACrD,IAAIG,YAAY,KAAKZ,iBAAiB,CAACM,MAAM,CAACG,QAAQ,CAAC,EAAE;QACvD,OAAO,IAAI;MACb;IACF;EACF;EAEA,OAAO,KAAK;AACd"}